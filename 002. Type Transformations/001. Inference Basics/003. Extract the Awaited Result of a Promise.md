We have already seen how to extract the return type of a function using the 'ReturnType' utility type.

But, what happens when we have a function that returns a Promise? How can we extract the type that the Promise resolves to?

What happens when we just use 'ReturnType' on an async function?

Let's say we have a function -

    const getUser = () => {
        return Promise.resolve({
            id: '123',
            name: 'John',
            email: 'john@example.com'
        });
    };

Here, the function 'getUser' returns a Promise that resolves to an object with 'id', 'name', and 'email' properties.

Let's see what 'ReturnType' gives us -

    type UserPromiseType = ReturnType<typeof getUser>;

Here, we will see that it gives the type as -

    Promise<{
        id: string;
        name: string;
        email: string;
    }>

So, it gives us the Promise type, not the resolved value type.

What if we want the actual type that the Promise resolves to?

Here, we can use yet another utility type called 'Awaited'.

This type takes a Promise type and gives us the type that the Promise resolves to.

    type getUserReturnType = Awaited<ReturnType<typeof getUser>>;

Here, we first get the return type of 'getUser' using 'ReturnType', which is a Promise type, and then we pass that to 'Awaited' to get the resolved value type.

If this seems confusing, let's break it down -

    type UserPromiseType = ReturnType<typeof getUser>;
    type getUserReturnType = Awaited<UserPromiseType>;

So, after this, 'getUserReturnType' will be of type -

    {
        id: string;
        name: string;
        email: string;
    }

This way, we can extract the awaited result type of a Promise returned by a function using 'ReturnType' and 'Awaited' together.