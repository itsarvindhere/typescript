Let's say we have an asynchronous function -

    const getServerSideProps = async () => {
        const data = await fetch("https://jsonplaceholder.typicode.com/todos/1");
        const json: { title: string } = await data.json();
        return {
            props: {
                json
            }
        };
    };

This function returns a 'Promise' that resolves to an object with a 'props' property containing the fetched JSON data.

Right now, TypeScript is inferring the return type as -

    Promise<{
        props: {
            json: {
                title: string;
            };
        };
    }>

What we want is a type helper function, let's call it 'InferPropsFromServerSideFunction' which, when passed the type of the function, will extract the type of the props. That is, in our case it should give us -

    {
        json: {
            title: string;
        };
    }

Well, we can use the conditional types along with the 'infer' keyword to achieve this.

    type InferPropsFromServerSideFunction<T> = T extends () => Promise<{ props: infer PropsType}> ? PropsType : never

So, what is going on here?

We define a generic type 'InferPropsFromServerSideFunction' that takes a type parameter 'T'.

First we check whether 'T' extends a function type that returns a 'Promise' which resolves to an object with a 'props' property.

If it does, then we use the 'infer' keyword to extract the type of the 'props' property into a new type variable 'PropsType'.

Finally, we return 'PropsType' as the result of our conditional type. If 'T' does not match the expected function signature, we return 'never'.

And well, that is pretty much it!