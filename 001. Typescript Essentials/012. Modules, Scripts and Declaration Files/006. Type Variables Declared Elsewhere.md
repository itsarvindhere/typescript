What is we have some value that will be available at runtime but we are not the ones that are providing its actual implementation? 

Just for example, let's say our index.ts file has -

    const state = DEBUG.getState();

Here, let's say 'DEBUG' is some global variable that is provided by some other script that we are including in our HTML file. So, at runtime, this variable will be available but TypeScript compiler has no idea about it. So, it will throw an error like -

    Cannot find name 'DEBUG'.

Now, how do we tell TypeScript compiler that this variable will be available at runtime?

Well, there is a way to do this and that's to use the 'declare' keyword.

In the same file, we can write -

    declare const DEBUG: {
        getState: () => string;
    }

Here, we are saying that while we do not provide the actual implementation of 'DEBUG', we are declaring its shape so that TypeScript compiler knows about it.

In fact, we can put this 'declare' line inside a declaration file instead of putting it in the same file. This way, we can keep all such declarations in one place.

And a good example of this is the 'window' variable which is a global variable provided by the browser. How are we able to use the 'window' variable in our TypeScript code without any errors? If you look at the 'lib.dom.d.ts' file that comes with TypeScript, you will see that it has a declaration for the 'window' variable like this -

    declare var window: Window & typeof globalThis;

So, it uses a 'declare' statement to tell TypeScript compiler about the 'window' variable that will be available at runtime.

Now, coming back to our example, we added the 'declare' statement for 'DEBUG' variable in our index.ts file. Now, when we compile the code, TypeScript compiler will not throw any errors because it knows about the 'DEBUG' variable and its shape.

But the issue here is, let's say we are using "DEBUG" variable in multiple files. In that case, we would have to add the same 'declare' statement in all those files which is not a good practice.

So, how do we solve this problem?

How do we ensure that our declaration is available across multiple files without having to repeat it in each file?

Well, we know that declaration files can act as modules and also as scripts. So, if we put our 'declare' statement in a declaration file without an 'export' keyword, it will be available across all files that include that declaration file.

So, if we have a debug.d.ts file with the following content -

    declare const DEBUG: {
        getState: () => string;
    }

Now, we will see that we can use the 'DEBUG' variable in any file without having to repeat the 'declare' statement.

There is another way to achieve the same thing and that is to use the 'declare global' syntax.

So, in our index.ts file, we can write -

    declare global {
        const DEBUG: {
            getState: () => string;
        }
    }

And instantly, the error goes away in all the other files that use the 'DEBUG' variable.

That's because with the 'declare global' syntax, we are telling TypeScript compiler that the declaration inside the block is a global declaration and should be available across all files.

So, the question is, what should we use? Should we use a declaration file without 'export' or should we use 'declare global' syntax?

Well, if you think about it, it is a good idea to have a separate declaration file for such global declarations. This way, we can keep all such declarations in one place and it is easier to manage.

But, if you think there is only one file that will use the global declaration, then using 'declare global' syntax is also fine.