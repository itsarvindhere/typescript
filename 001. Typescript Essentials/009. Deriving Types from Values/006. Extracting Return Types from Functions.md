In the last section, we learned how we can use the 'Parameters' utility type to extract the types of parameters of a function.

What about the return type of a function? How can we extract that?

Let's say we have this function -

    const createUser = (id: string) => {
        return {
            id,
            name: 'John Doe',
            email: 'john.doe@example.com'
        };
    };

We want to extract the return type of this function and use it as a type elsewhere in our code.

We want something like this -

    type User = {
        id: string;
        name: string;
        email: string;
    }

But, we do not want to manually define this type. We want to derive it from the return type of the 'createUser' function. This should ensure that if we change the return type of the function, the 'User' type should automatically reflect those changes.

So, how do we do that?

Well, we have another utility type called 'ReturnType' that helps us achieve this. Like the 'Parameters' utility type, 'ReturnType' also takes a function type as its argument and returns the return type of that function. Remember that it only works with function types, not with values.

    type User = ReturnType<typeof createUser>;

And now, if you hover over the 'User' type, you will see that it has been correctly inferred as -

    type User = {
        id: string;
        name: string;
        email: string;
    }

So, if in future we change the return type of the 'createUser' function, the 'User' type will automatically reflect those changes.

# ASYNCHRONOUS FUNCTIONS

Well, in the above example, we had a synchronous function. This means that the function returns a value directly.

What if we have an asynchronous function? How does 'ReturnType' work in that case?

Let's say we have -

    const fetchUser = async (id: string) => {
        return {
            id,
            name: "John Doe",
            age: 30,
        }
    };

So, this function uses the 'async' keyword, which means it returns a Promise that resolves to the return type of the function. So, how do we extract the return type of this function?

Let's use the 'ReturnType' utility type again -

    type User = ReturnType<typeof fetchUser>;

You will see that the 'User' type is inferred as -

    type User = Promise<{
        id: string;
        name: string;
        age: number;
    }>

It makes sense because the 'fetchUser' function returns a Promise that resolves to an object with 'id', 'name', and 'age' properties. It does not directly return the object.

But it is kind of annoying because we usually want the type of the resolved value of the Promise, not the Promise itself. And that's where the 'Awaited' utility type comes in handy.

The 'Awaited' utility type takes a Promise type as its argument and returns the type of the resolved value of that Promise.

So, we can pass the 'User' type to the 'Awaited' utility type to get the type of the resolved value of the Promise -

    type ResolvedUser = Awaited<User>;

And now, the 'ResolvedUser' type is inferred as -

    type ResolvedUser = {
        id: string;
        name: string;
        age: number;
    }

We can do it all in one line like this -

    type User = Awaited<ReturnType<typeof fetchUser>>;

It seems complicated, but it is actually quite simple. We are just using two utility types together to get the desired type.

First, we are using 'ReturnType' to get the return type of the 'fetchUser' function, which is a Promise. Then, we are using 'Awaited' to get the type of the resolved value of that Promise.